(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{388:function(t,e,s){"use strict";s.r(e);var n=s(45),a=Object(n.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"development-guide"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#development-guide"}},[t._v("#")]),t._v(" Development Guide")]),t._v(" "),s("h2",{attrs:{id:"pre-requisites"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pre-requisites"}},[t._v("#")]),t._v(" Pre-requisites")]),t._v(" "),s("p",[s("strong",[t._v("Access to Kubernetes cluster")])]),t._v(" "),s("p",[t._v("First of all, you will need access to a Kubernetes cluster. The easiest way to start is minikube.")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.virtualbox.org/wiki/Downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Virtualbox"),s("OutboundLink")],1),t._v(" - hypervisor to run a Kubernetes cluster")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kubernetes.io/docs/setup/minikube/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Minikube"),s("OutboundLink")],1),t._v(" - for Kubernetes cluster creation on local machine")]),t._v(" "),s("li",[s("a",{attrs:{href:"https://kubernetes.io/docs/tasks/tools/install-kubectl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Kubectl"),s("OutboundLink")],1),t._v(" - to interact with Kubernetes cluster")])]),t._v(" "),s("p",[s("strong",[t._v("Tools to build K8s Vault Webhook")])]),t._v(" "),s("p",[t._v("Apart from kubernetes cluster, there are some tools which are needed to build and test k8s-vault-webhook.")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[t._v("Git"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://golang.org/dl/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://docs.docker.com/install/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.gnu.org/software/make/manual/make.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Make"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"build"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#build"}},[t._v("#")]),t._v(" Build")]),t._v(" "),s("p",[s("strong",[t._v("Build Localy")])]),t._v(" "),s("p",[t._v("To achieve this, execute this command:-")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" build-code\n")])])]),s("p",[s("strong",[t._v("Build Image")])]),t._v(" "),s("p",[t._v("k8s-vault-webhook gets packaged as a container image for running on Kubernetes cluster. These instructions will guide you to build image.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" build-image\n")])])]),s("h2",{attrs:{id:"testing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#testing"}},[t._v("#")]),t._v(" Testing")]),t._v(" "),s("p",[t._v("If you want to play it on Kubernetes. You can use minikube.")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Start minikube")]),t._v("\n$ minikube start --vm-driver virtualbox\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ˜„  minikube v1.0.1 on linux "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nğŸ¤¹  Downloading Kubernetes v1.14.1 images "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the background "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ”¥  Creating kvm2 VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CPUs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2048MB, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Disk")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("20000MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ“¶  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v(" IP address is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".39.240\nğŸ³  Configuring Docker as the container runtime "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ³  Version of container runtime is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.06")]),t._v(".3-ce\nâŒ›  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" image downloads to complete "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nâœ¨  Preparing Kubernetes environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸšœ  Pulling images required by Kubernetes v1.14.1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸš€  Launching Kubernetes v1.14.1 using kubeğŸ˜„  minikube v1.0.1 on linux "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("amd64"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nğŸ¤¹  Downloading Kubernetes v1.14.1 images "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the background "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ”¥  Creating kvm2 VM "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("CPUs"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v(", "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Memory")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("2048MB, "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("Disk")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("20000MB"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ“¶  "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v(" IP address is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),t._v(".39.240\nğŸ³  Configuring Docker as the container runtime "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ³  Version of container runtime is "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18.06")]),t._v(".3-ce\nâŒ›  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" image downloads to complete "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nâœ¨  Preparing Kubernetes environment "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸšœ  Pulling images required by Kubernetes v1.14.1 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸš€  Launching Kubernetes v1.14.1 using kubeadm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". \nâŒ›  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" pods: apiserver proxy etcd scheduler controller dns\nğŸ”‘  Configuring cluster permissions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ¤”  Verifying component health "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ’—  kubectl is now configured to use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v("\nğŸ„  Done"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Thank you "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" using minikube"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("adm "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(". \nâŒ›  Waiting "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" pods: apiserver proxy etcd scheduler controller dns\nğŸ”‘  Configuring cluster permissions "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ¤”  Verifying component health "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nğŸ’—  kubectl is now configured to use "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"minikube"')]),t._v("\nğŸ„  Done"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v(" Thank you "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" using minikube"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Deploy the image on minikube")]),t._v("\n$ helm upgrade k8s-vault-webhook "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v("\n    ot-helm/k8s-vault-webhook --namespace vault --install\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),t._v(".\nRelease "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"k8s-vault-webhook"')]),t._v(" has been upgraded. Happy Helming"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\nNAME: k8s-vault-webhook\nLAST DEPLOYED: Mon May  "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("19")]),t._v(":55:03 "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2021")]),t._v("\nNAMESPACE: vault\nSTATUS: deployed\nREVISION: "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),t._v("\nTEST SUITE: None\n")])])]),s("p",[s("strong",[t._v("Running Test Cases")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v("\n")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);