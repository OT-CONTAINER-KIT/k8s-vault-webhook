(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{393:function(e,t,s){"use strict";s.r(t);var a=s(45),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation"}},[e._v("#")]),e._v(" Installation")]),e._v(" "),s("p",[e._v("K8s Vault Webhook is a golang based binary that is packaged as a Docker image and needs to be deployed inside the Kubernetes cluster. It cannot be deployed outside the Kubernetes cluster because of Kubernetes architecture dependency. It uses the concept of Admission Webhook and if you want to explore the concept of admission webhook please refer to "),s("a",{attrs:{href:"https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/",target:"_blank",rel:"noopener noreferrer"}},[e._v("official documentation"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("p",[e._v("k8s-vault-webhook can easily get installed by using "),s("a",{attrs:{href:"https://helm.sh/",target:"_blank",rel:"noopener noreferrer"}},[e._v("Helm"),s("OutboundLink")],1),e._v(" . We just simple need to add the repository of our "),s("a",{attrs:{href:"https://github.com/OT-CONTAINER-KIT/helm-charts",target:"_blank",rel:"noopener noreferrer"}},[e._v("helm charts"),s("OutboundLink")],1),e._v(". It requires "),s("code",[e._v("=>3.0.0")]),e._v(" version of helm.")]),e._v(" "),s("p",[e._v("First we need to add the repository for helm.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("$ helm repo "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("add")]),e._v(" ot-helm https://ot-container-kit.github.io/helm-charts\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\n"),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"ot-helm"')]),e._v(" has been added to your repositories\n")])])]),s("p",[e._v("Once the repo is added, we can install the k8s-vault-webhook.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("$ helm upgrade k8s-vault-webhook ot-helm/k8s-vault-webhook "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --namespace vault --install\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\nRelease "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"k8s-vault-webhook"')]),e._v(" has been upgraded. Happy Helming"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("\nNAME: k8s-vault-webhook\nLAST DEPLOYED: Mon May  "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("3")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("19")]),e._v(":55:03 "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2021")]),e._v("\nNAMESPACE: vault\nSTATUS: deployed\nREVISION: "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v("\nTEST SUITE: None\n")])])]),s("p",[e._v("Verify the deployment is successful by listing pods of k8s-vault-webhook.")]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[e._v("$ kubectl get pods -n vault\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v(".\nNAME                                 READY   STATUS    RESTARTS   AGE\nk8s-vault-webhook-6cf98dbd6f-5gjvv   "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          61s\nk8s-vault-webhook-6cf98dbd6f-tjdv5   "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v("/1     Running   "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("          48s\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);